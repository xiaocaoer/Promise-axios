<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>axios的基本使用</title>
</head>
<body>
	<script src="https://cdn.bootcss.com/axios/0.19.2/axios.min.js"></script>
	<button id="btn1">获取所有人信息</button><br><br>
	<button id="btn2">根据id获取一个人信息</button><br><br>
	<button id="btn3">添加一个人</button><br><br>
	<button id="btn4">修改一个人</button><br><br>
	<button id="btn5">删除一个人</button>

	<script type="text/javascript" >
		let btn1 = document.getElementById('btn1')
		let btn2 = document.getElementById('btn2')
		let btn3 = document.getElementById('btn3')
		let btn4 = document.getElementById('btn4')
		let btn5 = document.getElementById('btn5')
		
		axios.defaults.baseURL = 'http://localhost:3000'
		// 获取所有人信息
		//完整版写法
		//axios中成功的回调用中response,response.data才是请求回来的数据
		//失败回调用error接受
		// btn1.onclick = () => {
		// 	axios({
		// 			url:'http://localhost:3000/get_persons',
		// 			method:'get',
		// 		}).then(
		// 			(response) => {console.log('请求成功了',response.data)},
		// 			(error) => {console.log(errror)}
		// 		)
		// }
		//简单写法
		btn1.onclick = () => {
			axios.get('http://localhost:3000/get_persons').then(
				(response) => {console.log('请求成功的信息是',response.data)},
				(error) => {console.log('请求失败了,错误是',error.message)})
		}

		// 2.根据id获取一个人信息
			// 完整写法
			// btn2.onclick = () => {
			// 	axios({
			// 		url:'http://localhost:3000/get_person_byid',
			// 		method:'get',
			// 		params:{id:1}
			// 	}).then(
			// 		(response) => {console.log('请求成功了',response.data)},
			// 		(result) => {console.log('请求失败了')},
			// 	)
			// }
			//简单写法
			btn2.onclick = () => {
				axios.get('http://localhost:3000/get_person_byid',{params:{id:1}}).then(
					(response) => {console.log('请求成功了,得到的响应数据是',response.data)},
					(error) => {console.log('请求失败了')}
				)
			}

		//3. 添加一个人
			//完整版写法
			// btn3.onclick = () => {
			// 	axios({
			// 		url:'http://localhost:3000/person',
			// 		method:'post',
			// 		// data:{name:'小草儿',age:18}//请求体参数是json格式
			// 		data:'name=小草儿&age=18'
			// 	}).then(
			// 		(response) => {console.log(response.data)},
			// 		(error) => {console.log(error.message)}
			// 	)
			// }
			//精简写法
			// btn3.onclic = () => {
			// 	axios.post('http://localhost:3000/person',{name:'小草儿',age:18}).then(
			// 		(response) => {console.log(response.data)},
			// 		(error) => {console.log(error.message)}
			// 	)
			// }	
			btn3.onclick = () => {
				axios.post('http://localhost:3000/person','name=小美&age=18').then(
					(response) => {console.log(response.data)},
					(error) => {console.log(error.message)}
				)
			}
		//4.修改一个人
			//完整写法
		// 	btn4.onclick = () => {
		// 		axios({
		// 			url:'http://localhost:3000/person',
		// 			data:{
		// 				id:6,
		// 				name:'邋遢',
		// 				age:15
		// 		},
		// 		method:'put'
		// 	}).then(
		// 		(response) => {console.log(response.data)},
		// 		(error) => {console.log(error.message)}
		// 	)
		// }
			//简便写法
			btn4.onclick = () => {
				axios.put('http://localhost:3000/person',{id:6,name:'大邋遢',age:15}).then(
				(response) => {console.log(response.data)},
				(error) => {console.log(error.message)}
			)
			}

			//5.删除一个人
				//完整写法
				btn5.onclick = () => {
					axios({
						url:'http://localhost:3000/person/6',
						method:'delete',
					}).then(
						(response) => {console.log(response.data)},
						(error) => {console.log(error.message)})
				}


	</script>
</body>
</html>